jQuery(function($){$('.lws_woorewards_sponsorship_widget').on('click','.lws_woorewards_sponsorship_form .lws_woorewards_sponsorship_submit',function(){var widget=$(this).closest('.lws_woorewards_sponsorship_widget');var feedback=widget.find('.lws_woorewards_sponsorship_feedback').show();feedback.html(undefined==widget.data('wait')?"Sending the sponsorship request ...":widget.data('wait'));var button=widget.find('.lws_woorewards_sponsorship_submit')
var colors=[];colors[0]=button.css('background-color');colors[1]=button.css("color");button.prop('disabled',!0).css({'background-color':'#aaa','color':"#fff"});var sponsor=widget.find('input.lws_woorewards_sponsorship_host_field');sponsor=(sponsor.length>0?sponsor.val():'');$.getJSON(lws_ajax.url,{action:'lws_woorewards_add_sponsorship',sponsorship_nonce:widget.find('input.lws_woorewards_sponsorship_nonce').val(),sponsor_email:sponsor,sponsored_email:widget.find('input.lws_woorewards_sponsorship_field').val(),},function(result){var feedback=widget.find('.lws_woorewards_sponsorship_feedback');feedback.removeClass('lws_woorewards_sponsorship_error').removeClass('lws_woorewards_sponsorship_succeed');if(!result)
feedback.addClass('lws_woorewards_sponsorship_error').html(undefined==widget.data('err1')?'Server error':widget.data('err1')).show();if(result.error!=undefined)
feedback.addClass('lws_woorewards_sponsorship_error').html(result.error).show();if(result.message!=undefined)
feedback.addClass('lws_woorewards_sponsorship_succeed').html(result.message).show();if(result.redirect!=undefined&&result.redirect.length>0)
document.location=result.redirect}).fail(function(d,textStatus,error){console.log("["+d.status+"] "+d.responseText);feedback.html(undefined==widget.data('err0')?"An internal server error occured. Please retry later.":widget.data('err0')).show()}).done(function(){button.prop('disabled',!1).css({'background-color':colors[0],'color':colors[1]})})})})