jQuery(function($){$('.button-controls .lws_select_all').on('click',function(e){let root=$(e.target).closest('.lws_navmenu_metabox');if(root.length){root.find('input.lws_menu_subtype[type="checkbox"]').prop('checked',$(e.target).prop('checked'))}});$('input.lws_menu_subtype[type="checkbox"]').on('click',function(e){let root=$(e.target).closest('.lws_navmenu_metabox');if(root.length&&!$(e.target).prop('checked')){root.find('.button-controls .lws_select_all').prop('checked',!1)}});$('.submit_lws_menuitems').on('click',function(e){let root=$(e.target).closest('.lws_navmenu_metabox');if(0==root.length)
return;let title=root.find('.menu-item-title');if(title.length&&title.hasClass('lws-required')){if(!title.val().trim().length)
return}
e.preventDefault();let extra={};root.find('input.lws_input_extra_data').each(function(){let type=$(this).attr('type');if('checkbox'==type||'radio'==type){if($(this).prop('checked'))
extra[$(this).attr('name')]=$(this).val();}else{extra[$(this).attr('name')]=$(this).val()}});let data={'menu-item-object-id':-1,'menu-item-object':'','menu-item-type':'custom','menu-item-slug':root.find('.menu-item-type').data('slug'),'menu-item-classes':(root.find('.menu-item-type').val()+' '+root.find('.menu-item-classes').val()).trim(),'menu-item-extra':extra};let attributes=['title','url','description','attr-title','target','xfn'];attributes.forEach(function(index){data['menu-item-'+index]=(root.find('.menu-item-'+index).length?root.find('.menu-item-'+index).val():'')});let args={};let subtypes=root.find('input.lws_menu_subtype[type="checkbox"]');if(!subtypes.length){args['-1']=data}else{subtypes.filter(':checked').each(function(){let subtype=$(this).val();args[subtype]={...data};args[subtype]['menu-item-object']=subtype;let li=$(this).closest('li');if(li.find('.sub-menu-item-classes').length){args[subtype]['menu-item-classes']=(root.find('.menu-item-type').val()+' '+li.find('.sub-menu-item-classes').val()).trim()};attributes.forEach(function(index){if(li.find('.sub-menu-item-'+index).length)
args[subtype]['menu-item-'+index]=li.find('.sub-menu-item-'+index).val();})})}
if(!Object.keys(args).length)
return!1;root.find('.button-controls .spinner').addClass('is-active');window.wpNavMenu.addItemToMenu(args,window.wpNavMenu.addMenuItemToBottom,function(){root.find('.button-controls .select-all').prop('checked',!1);root.find('.button-controls .spinner').removeClass('is-active');attributes.forEach(function(index){if(root.find('.menu-item-'+index+':not(.still)').length)
root.find('.menu-item-'+index).val('').trigger('blur');});root.find('input.lws_input_extra_data').each(function(){let type=$(this).attr('type');if('checkbox'==type||'radio'==type){$(this).prop('checked',undefined!==$(this).data('dft'))}else if(undefined!==$(this).data('dft')){$(this).val($(this).data('dft'))}})});return!1})})